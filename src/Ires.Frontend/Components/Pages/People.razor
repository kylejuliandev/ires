@page "/people"
@inject IresDbContext DbContext

<h3>People</h3>

<FluentPaginator State="@pagination" SummaryTemplate="@template" />

<FluentDataGrid Items="@people" Pagination="@pagination">
    <PropertyColumn Property="@(p => p.Id)" Sortable="true" />
    <PropertyColumn Property="@(p => p.GivenName)" Sortable="true" />
    <PropertyColumn Property="@(p => p.DateOfBirth)" Format="yyyy-MM-dd" Sortable="true" />
</FluentDataGrid>

<FluentPaginator State="@pagination" />

@code {
    private PaginationState pagination = new PaginationState() { ItemsPerPage = 2 };
    private RenderFragment template = @<span />;

    private IQueryable<Person>? people;

    protected override void OnInitialized()
    {
        people = DbContext.People.AsQueryable();
    }

    private int GetAge(Person person)
    {
        return DateOnly.FromDateTime(DateTime.UtcNow).Year - person.DateOfBirth.Year;
    }
}
